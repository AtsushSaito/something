# Resolution of Toric Singularities in Lean

This project formalizes the proof of resolution of singularities for toric varieties in the Lean 4 theorem prover. The proof follows the classical approach of subdividing the fan defining a toric variety until all cones are smooth, which yields a proper birational morphism from a smooth toric variety.

## Project Structure

- `ToricGeometry.lean`: Basic definitions for toric geometry (cones, fans, etc.)
- `ConeSubdivision.lean`: Algorithms for subdividing cones (star subdivision, etc.)
- `ToricResolution.lean`: Definition of toric varieties and singularities
- `ResolutionOfSingularities.lean`: The main proof of resolution of singularities

## Mathematical Background

Toric varieties are algebraic varieties that contain an algebraic torus as a dense open subset, with a compatible torus action. They can be described combinatorially using fans, which are collections of cones in a lattice.

A toric variety is smooth if and only if all cones in its defining fan are smooth. A cone is smooth if it is generated by a subset of a basis of the lattice.

The resolution of singularities for toric varieties proceeds by subdividing the cones in the fan until they are all smooth. This yields a proper birational morphism from a smooth toric variety that is an isomorphism over the smooth locus of the original variety.

## Key Theorems

- `exists_smooth_refinement`: Every fan admits a smooth refinement
- `exists_smooth_subdivision`: Every rational polyhedral cone can be subdivided into a fan of smooth cones
- `resolution_of_toric_singularities`: For any toric variety, there exists a proper birational morphism from a smooth toric variety that is an isomorphism over the smooth locus

## Development with Lean Dojo

This project utilizes [Lean Dojo](https://github.com/lean-dojo/LeanDojo) to assist with the development of formal proofs. The test script `test_leandojo.py` demonstrates the integration.

## Requirements

- Lean 4.3.0
- mathlib4
- Lean Dojo 4.19.0

## Getting Started

To build the project:

```bash
lake build
```

To verify the proofs:

```bash
lake exe lean Something/ResolutionOfSingularities.lean
```
